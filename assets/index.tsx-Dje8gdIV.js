import{j as n,c as E}from"./index-BdTgVImM.js";const i=t=>n.jsx("img",{src:`https://cdn.simpleicons.org/${t}/white`,alt:t,className:"w-8 h-8 object-contain opacity-70 group-hover:opacity-100 transition-opacity duration-300",loading:"lazy"}),k=({label:t,icon:e,subtext:o,url:r})=>n.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:`
      group flex items-center gap-3 p-3 rounded-xl 
      bg-[#252833]/40 border border-transparent 
      hover:bg-white/10 hover:border-white/30
      transition-all duration-200
    `,children:[n.jsx("div",{className:"flex-shrink-0 flex items-center justify-center",children:e}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-medium text-[#E2E2E2] group-hover:text-white transition-colors",children:t}),n.jsx("span",{className:"text-[10px] text-[#888] group-hover:text-[#CCC] transition-colors",children:o})]}),n.jsx("span",{className:"ml-auto text-[#666] opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all duration-300",children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),n.jsx("polyline",{points:"7 7 17 7 17 17"})]})})]}),y=()=>n.jsx("div",{className:"w-full pt-3 mt-1 text-center border-t border-[#252833]",children:n.jsxs("p",{className:"text-[11px] text-[#555]",children:["Powered by"," ",n.jsx("a",{href:"https://github.com/010101-sans/moctale-plus",target:"_blank",rel:"noreferrer",className:"hover:text-[#888] underline decoration-dotted",children:"Moctale Plus"})," ","by"," ",n.jsx("a",{href:"https://github.com/010101-sans",target:"_blank",rel:"noreferrer",className:"hover:text-[#888] underline decoration-dotted",children:"010101-sans"})]})}),T=({title:t,year:e,type:o,isAnime:r})=>{const s=encodeURIComponent(`${t} ${e}`),l=o==="movie"?"movie":"series",c=[{label:"YouTube Reviews",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}${r?"+anime":""}+${l}+review`},{label:"YouTube Podcasts",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}${r?"+anime":""}+podcast+discussion`},{label:"Hidden Details",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}${r?"+anime":""}+detailed+analysis+and+breakdown`},{label:"Twitter / X",icon:i("x"),url:`https://twitter.com/search?q=${s.replace(`%20${e}`,"")}${r?"+anime":""}+review+sand+discussion&f=top`},{label:"Reddit",icon:i("reddit"),url:`https://www.reddit.com/search/?q=${s.replace(`%20${e}`,"")}${r?"+anime":""}+reviews+and+discussion`}];return n.jsxs("div",{className:"flex flex-col items-start px-5 py-5 gap-4 w-full md:bg-[#1B1B1B] md:border md:border-[#252833] rounded-2xl",children:[n.jsx("h2",{className:"text-[20px] font-medium text-[#E2E2E2] w-full border-b border-[#252833] pb-3 tracking-[0.1px]",children:"Reviews & Discussions"}),n.jsx("div",{className:"flex flex-col w-full gap-2",children:c.map((a,d)=>n.jsx(k,{...a,subtext:`Search ${t}`},d))}),n.jsx(y,{})]})},L=({title:t,year:e,isAnime:o})=>{const r=encodeURIComponent(`${t} ${e}`),s=[...o?[{label:"MyAnimeList",icon:i("myanimelist"),url:`https://myanimelist.net/search/all?q=${r.replace(`%20${e}`,"")}`},{label:"AniList",icon:i("anilist"),url:`https://anilist.co/search/anime?search=${r.replace(`%20${e}`,"")}`},{label:"Kitsu",icon:i("kitsu"),url:`https://kitsu.io/anime?text=${r.replace(`%20${e}`,"")}`}]:[],{label:"IMDb",icon:i("imdb"),url:`https://www.imdb.com/find/?q=${r.replace(`%20${e}`,"")}`},{label:"TMDB",icon:i("themoviedatabase"),url:`https://www.themoviedb.org/search?query=${r.replace(`%20${e}`,"")}`},{label:"Letterboxd",icon:i("letterboxd"),url:`https://letterboxd.com/search/${r.replace(`%20${e}`,"")}/`}];return n.jsxs("div",{className:"flex flex-col items-start px-5 py-5 gap-4 w-full md:bg-[#1B1B1B] md:border md:border-[#252833] rounded-2xl",children:[n.jsx("h2",{className:"text-[20px] font-medium text-[#E2E2E2] w-full border-b border-[#252833] pb-3 tracking-[0.1px]",children:"More Platforms"}),n.jsx("div",{className:"flex flex-col w-full gap-2",children:s.map((l,c)=>n.jsx(k,{...l,subtext:`View on ${l.label}`},c))}),n.jsx(y,{})]})},q=({title:t,year:e,type:o,isAnime:r})=>{const s=encodeURIComponent(`${t} ${e}`),l=o==="movie"?"movie":"series",c=[{label:"Songs and OSTs",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}+${l}${r?"+anime":""}+songs+and+OSTs`},...r?[{label:"Anime Music Videos",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}+${l}+Anime+music+videos+`},{label:"Anime Video Essays",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}+${l}+anime+video+essays`}]:[],{label:"Fan Edits",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s.replace(`%20${e}`,"")}+${l}${r?"+anime":""}+fan+edits`},{label:"Behind the Scenes",icon:i("youtube"),url:`https://www.youtube.com/results?search_query=${s}${r?"+anime":""}+${l}+making+and+behind+the+scenes`}];return n.jsxs("div",{className:"flex flex-col items-start px-5 py-5 gap-4 w-full md:bg-[#1B1B1B] md:border md:border-[#252833] rounded-2xl",children:[n.jsx("h2",{className:"text-[20px] font-medium text-[#E2E2E2] w-full border-b border-[#252833] pb-3 tracking-[0.1px]",children:"Creative Corner"}),n.jsx("div",{className:"flex flex-col w-full gap-2",children:c.map((a,d)=>n.jsx(k,{...a,subtext:`Search ${t}`},d))}),n.jsx(y,{})]})},B=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-[#888] group-hover:text-white transition-colors",children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("path",{d:"m21 21-4.3-4.3"})]}),f=({label:t,url:e,colorClass:o})=>n.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:`
      flex items-center gap-3 px-3 py-2.5 rounded-xl
      bg-[#252833]/40 border border-[#333] 
      hover:bg-[#303440] hover:border-[#555] hover:text-white
      transition-all duration-200 group
      text-xs font-medium text-[#C6C6C6]
      h-full
      ${o||""}
    `,children:[n.jsx("div",{className:"flex-shrink-0 opacity-70 group-hover:opacity-100 transition-opacity",children:n.jsx(B,{})}),n.jsx("span",{className:"truncate line-clamp-2 break-words whitespace-normal leading-tight text-left",children:t})]}),M=({title:t})=>{const e=encodeURIComponent(t);return n.jsxs("div",{className:"flex flex-col items-start px-5 py-5 gap-4 w-full md:bg-[#1B1B1B] md:border md:border-[#252833] rounded-2xl transition-all hover:border-[#3a3f50]",children:[n.jsx("h2",{className:"text-[20px] font-medium text-[#E2E2E2] w-full border-b border-[#252833] pb-3 tracking-[0.1px] flex justify-between items-center",children:"Box Office"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[n.jsx(f,{label:"Google Box Office",url:`https://www.google.com/search?q=${e}+box+office+report`}),n.jsx(f,{label:"Box Office Mojo",url:`https://www.boxofficemojo.com/search/?q=${e}`,colorClass:"hover:border-yellow-500/40"}),n.jsx(f,{label:"Sacnilk Verdict",url:`https://www.google.com/search?q=${e}+box+office+collection+site:sacnilk.com`,colorClass:"hover:border-red-500/40"}),n.jsx(f,{label:"Bollywood Hungama",url:`https://www.google.com/search?q=${e}+box+office+site:bollywoodhungama.com`}),n.jsx(f,{label:"The Numbers",url:`https://www.the-numbers.com/search?search_term=${e}`}),n.jsx(f,{label:"Wikipedia Budget",url:`https://en.wikipedia.org/wiki/Special:Search?search=${e}+film+box+office`})]}),n.jsx(y,{})]})},I=()=>{try{let t=document.querySelector("h1.text-\\[20px\\], h1.lg\\:text-\\[28px\\]");t||(t=Array.from(document.querySelectorAll("h1")).find(x=>{const b=x.textContent?.trim()||"";return b.length>1&&!["Menu","Home","Search","Moctale"].includes(b)})||null);let e=t?.textContent?.trim()||"";if(e=e.replace(/\(\d{4}\)/,"").trim(),!e)return null;const r=document.querySelector("div.text-\\[14px\\].text-\\[\\#ABABAB\\]")?.textContent?.trim()||"";let s="",l="Unknown";if(r){const h=r.match(/\b(19|20)\d{2}\b/);h&&(s=h[0]),r.includes("Movie")?l="Movie":(r.includes("Show")||r.includes("TV")||r.includes("Series")||r.includes("Season"))&&(l="Show")}const c=new Set;document.querySelectorAll('a[href*="/genre/"]').forEach(h=>c.add(h.textContent?.trim().toLowerCase()||""));const d=document.querySelector('a[href*="/country/"]')?.textContent?.trim().toLowerCase()||"";r&&c.add(r.toLowerCase());const p=["anime","donghua","seinen","shonen","shojo","josei","isekai","mecha","slice of life","animation"];let u=!1;for(const h of c)if(p.some(x=>h.includes(x))){u=!0;break}return!u&&d==="japan"&&(c.has("animation")||c.has("animated"))&&(u=!0),{title:e,year:s,isAnime:u,type:l}}catch(t){return console.error("[Moctale+] Error scraping page info:",t),null}},A=({mediaInfo:t,settings:e})=>n.jsxs("div",{className:"flex flex-col gap-6 w-full mt-6 transition-all duration-300 ease-in-out",children:[e.enableBoxOffice&&t.type==="Movie"&&n.jsx(M,{title:t.title,year:t.year}),e.enableDiscussions&&n.jsx(T,{...t}),e.enablePlatforms&&n.jsx(L,{...t}),e.enableCreative&&n.jsx(q,{...t})]}),N="moctale-linkified",w=/\b(?:https?:\/\/)?(?:www\.)?(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(?:\/[^\s"'<>]*)?\b/g,P=t=>{const e=t.startsWith("http")?t:`https://${t}`;try{return new URL(e).href}catch{return null}},R=()=>{const t=document.body,e=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(s){const l=s.parentElement;if(!l||l.closest("a, button, input, textarea, code, pre")||!s.nodeValue?.trim())return NodeFilter.FILTER_REJECT;const c=s.nodeValue||"";return!c.includes(".")||c.length<4||!/(?:https?:\/\/|www\.|[\w-]+\.[\w]{2,})/.test(c)?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),o=[];let r;for(;r=e.nextNode();)o.push(r);o.forEach(s=>{const l=s.nodeValue;if(w.lastIndex=0,!w.test(l))return;w.lastIndex=0;const c=document.createDocumentFragment();let a=0,d=!1;l.replace(w,(p,u)=>{d=!0,c.append(l.slice(a,u));const h=P(p);if(!h)c.append(p);else{const x=document.createElement("a");x.href=h,x.textContent=p,x.target="_blank",x.rel="noopener noreferrer",x.className=`${N} text-blue-400 hover:underline cursor-pointer z-10 relative`,x.addEventListener("click",b=>b.stopPropagation()),c.append(x)}return a=u+p.length,p}),d&&(c.append(l.slice(a)),s.parentNode?.replaceChild(c,s))})},_=()=>{document.querySelectorAll(`a.${N}`).forEach(e=>{const o=document.createTextNode(e.textContent||"");e.parentNode?.replaceChild(o,e)})},D=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"7 10 12 15 17 10"}),n.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),F=()=>{const t=[],e=document.querySelectorAll('a[href^="/content/"].group');return e.length===0?(alert("[Moctale+] No content items found. Please scroll down to ensure items are loaded."),[]):(e.forEach(o=>{let r=o.getAttribute("aria-label");r||(r=o.querySelector("h3")?.textContent?.trim()||"Unknown Title");const l=o.querySelector("p")?.textContent?.trim()||"";let c="Unknown",a="N/A";const d=/^(.*?)\s+•\s+(\d{4})$/,p=l.match(d);if(p)c=p[1].trim(),a=p[2];else{const u=l.match(/\d{4}/);u&&(a=u[0]),l.toLowerCase().includes("movie")?c="Movie":l.toLowerCase().includes("show")||l.toLowerCase().includes("tv")?c="TV Show":l.toLowerCase().includes("season")&&(c="Season")}t.push({title:r,year:a,type:c})}),t)},U=(t,e)=>{const o=[["Title","Year","Type"].join(","),...t.map(a=>`"${a.title.replace(/"/g,'""')}",${a.year},${a.type}`)].join(`
`),r=new Blob([o],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(r),l=document.createElement("a");l.href=s;const c=e.replace(/[<>:"/\\|?*\x00-\x1F]/g,"").trim();l.setAttribute("download",`${c}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},O=()=>{const t=()=>{const e=F();if(e&&e.length>0){const r=document.querySelector("h1.text-lg.lg\\:text-2xl")?.textContent?.trim()||"Moctale_Collection";U(e,r)}};return n.jsxs("button",{type:"button",onClick:t,className:`
        h-10 px-3 ml-2 rounded-md
        inline-flex items-center justify-center gap-2
        transition-colors duration-200
        focus:outline-none focus:ring-1
        bg-[#1A1A1A] hover:bg-[#252525] focus:ring-[#404040]
        cursor-pointer 
      `,title:"Tip: Scroll to bottom of the collection first.",children:[n.jsx(D,{}),n.jsxs("div",{className:"flex flex-col items-start justify-center gap-1",children:[n.jsx("span",{className:"text-xs font-medium text-white leading-none",children:"Export Collection to CSV"}),n.jsxs("span",{className:"text-[9px] text-white/60 leading-none whitespace-nowrap",children:["Powered by"," ",n.jsx("a",{href:"https://github.com/010101-sans/moctale-plus",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-[#DDD] transition-colors underline decoration-dotted",onClick:e=>e.stopPropagation(),children:"Moctale Plus"})]})]})]})},V=()=>{const e=Array.from(document.querySelectorAll("button")).filter(o=>o.getAttribute("aria-label")==="Save"||o.textContent&&o.textContent.trim()==="Save");e.length!==0&&e.forEach((o,r)=>{const s=o.parentElement;if(!s||s.querySelector(".moctale-plus-export-wrapper"))return;const l=document.createElement("div");l.className="moctale-plus-export-wrapper",l.style.display="inline-flex",l.style.alignItems="center",o.nextSibling?s.insertBefore(l,o.nextSibling):s.appendChild(l),E.createRoot(l).render(n.jsx(O,{})),console.log(`[Moctale+] Export Button Injected (Instance ${r+1})`)})},K=()=>n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"7 10 12 15 17 10"}),n.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),W=()=>{const t=[],e=document.querySelectorAll('div[role="link"]');return e.length===0&&document.querySelectorAll(".grid > div.group").length===0?(alert("[Moctale+] No items found. Please wait for the collection to load."),[]):(e.forEach(o=>{const s=o.querySelector("h3")?.textContent?.trim()||"Unknown Title",c=o.querySelector("p")?.textContent?.trim()||"";let a="Unknown",d="N/A";const p=/^(.*?)\s+•\s+(\d{4})$/,u=c.match(p);if(u)a=u[1].trim(),d=u[2];else{const h=c.match(/\d{4}/);h&&(d=h[0]),c.toLowerCase().includes("movie")?a="Movie":c.toLowerCase().includes("show")&&(a="Show")}t.push({title:s,year:d,type:a})}),t)},H=(t,e)=>{const o=[["Title","Year","Type"].join(","),...t.map(a=>`"${a.title.replace(/"/g,'""')}",${a.year},${a.type}`)].join(`
`),r=new Blob([o],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(r),l=document.createElement("a");l.href=s;const c=e.replace(/[<>:"/\\|?*\x00-\x1F]/g,"").trim();l.setAttribute("download",`${c}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},z=()=>{const t=()=>{const e=W();if(e&&e.length>0){const r=document.querySelector("h1.text-xl.lg\\:text-2xl.font-bold")?.textContent?.trim()||"My_Moctale_Collection";H(e,r)}};return n.jsxs("button",{type:"button",onClick:t,className:`
        h-10 px-3 ml-2 rounded-md
        inline-flex items-center justify-center gap-2
        transition-colors duration-200
        focus:outline-none focus:ring-1
        bg-[#1A1A1A] hover:bg-[#252525] focus:ring-[#404040]
        cursor-pointer 
      `,title:"Tip: Scroll to bottom of the collection first.",children:[n.jsx(K,{}),n.jsxs("div",{className:"flex flex-col items-start justify-center gap-1",children:[n.jsx("span",{className:"text-xs font-medium text-white leading-none",children:"Export Collection to CSV"}),n.jsxs("span",{className:"text-[9px] text-white/60 leading-none whitespace-nowrap",children:["Powered by"," ",n.jsx("a",{href:"https://github.com/010101-sans/moctale-plus",target:"_blank",rel:"noopener noreferrer",className:"text-white/70 hover:text-[#DDD] transition-colors underline decoration-dotted",onClick:e=>e.stopPropagation(),children:"Moctale Plus"})]})]})]})},X=()=>{if(document.getElementById("moctale-plus-my-export-btn"))return;const e=Array.from(document.querySelectorAll("button")).find(o=>o.textContent?.includes("Add Content"));if(e&&e.parentElement){const o=e.parentElement;o.style.display="flex",o.style.alignItems="center",o.style.gap="8px";const r=document.createElement("div");r.id="moctale-plus-my-export-btn",o.appendChild(r),E.createRoot(r).render(n.jsx(z,{})),console.log("[Moctale+] My Collection Export Button Injected")}},Y=()=>{if(!window.location.hash.startsWith("#auto_search="))return;const t=window.location.hash.replace("#auto_search=",""),e=decodeURIComponent(t);history.replaceState(null,"",window.location.pathname+window.location.search);const o=setInterval(()=>{const r=document.querySelector('button[aria-label="Search"]');r&&(clearInterval(o),r.click(),G(e))},300);setTimeout(()=>clearInterval(o),3e3)},G=t=>{const e=setInterval(()=>{const o=document.querySelector('input[placeholder*="Search for Movies"]');o&&(clearInterval(e),J(o,t))},200);setTimeout(()=>clearInterval(e),3e3)},J=(t,e)=>{t.focus();const o=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value")?.set;o?o.call(t,e):t.value=e;const r=new Event("input",{bubbles:!0});t.dispatchEvent(r),setTimeout(()=>{const s=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13,charCode:13});t.dispatchEvent(s)},300)},m=t=>{console.log(`[Moctale+] Shortcut: Navigating to ${t}`),window.location.href=t},Z=()=>{const t=document.querySelector('header a[href^="/u/"]')||document.querySelector('a[href^="/u/"]');if(t){const e=t.getAttribute("href");return e?e.split("/u/")[1]:null}return null},Q=()=>{console.log("[Moctale+] Shortcut: Triggering Search");const t=document.querySelector('button[aria-label="Search"]');t?t.click():window.location.hash="#auto_search="},ee=()=>{const t=window.location.href;t.includes("timeFilter=today")?m("/schedule?timeFilter=upcoming"):t.includes("timeFilter=upcoming")?m("/schedule?timeFilter=announced"):m("/schedule?timeFilter=today")},te=()=>{const t=window.location.pathname;m(t==="/explore/categories"?"/explore/genres":t==="/explore/genres"?"/explore/anime":t==="/explore/anime"?"/explore/franchise":"/explore/categories")},oe=()=>{const t=Z(),e=window.location.pathname,o=t?`/u/${t}`:null,r="/my-collections",s="/saved-collections";console.log(`[Moctale+] Cycling Profile. Current: ${e}, User: ${t}`),o&&e.includes(o)?m(r):e.includes(r)?m(s):e.includes(s)&&o?m(o):m(o||r)},ne=t=>{t&&(console.log("[Moctale+] Keyboard Shortcuts Initialized (Capture Mode)"),window.addEventListener("keydown",e=>{const o=e.target;if(!(o.tagName==="INPUT"||o.tagName==="TEXTAREA"||o.isContentEditable)&&!(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey))switch(e.key){case"1":e.preventDefault(),e.stopPropagation(),m("/explore");break;case"2":e.preventDefault(),e.stopPropagation(),ee();break;case"3":e.preventDefault(),e.stopPropagation(),m("/clubs");break;case"4":e.preventDefault(),e.stopPropagation(),te();break;case"5":e.preventDefault(),e.stopPropagation(),Q();break;case"6":e.preventDefault(),e.stopPropagation(),oe();break}},{capture:!0}))};console.log("%c[Moctale+] Loaded","color: #bada55");let j=null,g=[];const re=async()=>new Promise(t=>{const e={activeTheme:"default",enableLinkifier:!0,enableDiscussions:!0,enablePlatforms:!0,enableCreative:!0,enableCollectionExport:!0,enableBoxOffice:!0,enableShortcuts:!0};typeof chrome<"u"&&chrome.storage?chrome.storage.local.get(e,o=>t(o)):t(e)}),C=t=>{const e=I();if(!e)return;let o=null;const r=document.querySelector(".flex.flex-col.lg\\:flex-row.lg\\:justify-between");if(r)o=r.querySelector('[class*="xl:w-[306px]"]');else{const l=document.querySelectorAll('[class*="xl:w-[306px]"]');l.length>0&&(o=l[0])}if(!o)return;let s=document.getElementById("moctale-plus-root");s||(s=document.createElement("div"),s.id="moctale-plus-root",s.className="w-full",o.appendChild(s),j=E.createRoot(s)),j&&j.render(n.jsx(A,{mediaInfo:e,settings:t}))},v=async()=>{const t=await re();g.forEach(clearTimeout),g=[],document.body.classList.remove("theme-oled","theme-coffee","theme-midnight"),t.activeTheme&&t.activeTheme!=="default"&&document.body.classList.add(`theme-${t.activeTheme}`),t.enableLinkifier?R():_(),(window.location.pathname.includes("/content/")||window.location.pathname.includes("/title/"))&&(C(t),g.push(setTimeout(()=>C(t),1e3)),g.push(setTimeout(()=>C(t),3e3))),t.enableCollectionExport?(window.location.pathname.includes("/explore/collection/")&&setTimeout(V,1e3),window.location.pathname.includes("/my-collections")&&setTimeout(X,1e3)):(document.querySelectorAll(".moctale-plus-export-wrapper").forEach(e=>e.remove()),document.getElementById("moctale-plus-export-btn")?.remove(),document.getElementById("moctale-plus-my-export-btn")?.remove()),Y(),ne(t.enableShortcuts)};function le(t,e){let o;return function(...r){clearTimeout(o),o=setTimeout(()=>t(...r),e)}}const se=le(()=>v(),500);typeof chrome<"u"&&chrome.storage&&chrome.storage.onChanged.addListener(t=>{v()});let S=location.href;const ce=new MutationObserver(t=>{if(location.href!==S){S=location.href,setTimeout(v,1500);return}t.some(e=>e.addedNodes.length>0)&&se()}),$=document.getElementById("root")||document.body;$&&ce.observe($,{subtree:!0,childList:!0});setTimeout(v,1e3);
