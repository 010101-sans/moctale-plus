self.window=self;const e=()=>{chrome.contextMenus.removeAll(()=>{chrome.contextMenus.create({id:"search-on-moctale",title:"Search '%s' on Moctale",contexts:["selection"]},()=>{chrome.runtime.lastError})})};chrome.runtime.onInstalled.addListener(()=>{chrome.storage.local.get(["enableContextMenu"],t=>{!1!==t.enableContextMenu&&e()})}),chrome.contextMenus.onClicked.addListener((e,t)=>{if("search-on-moctale"===e.menuItemId&&e.selectionText){const t=encodeURIComponent(e.selectionText.trim());chrome.tabs.create({url:`https://www.moctale.in/explore#auto_search=${t}`})}}),chrome.storage.onChanged.addListener((t,n)=>{"local"===n&&t.enableContextMenu&&(t.enableContextMenu.newValue?e():chrome.contextMenus.removeAll())});
