const c="https://www.moctale.in/explore#auto_search=",n=()=>{chrome.contextMenus.create({id:"search-on-moctale",title:"Search '%s' on Moctale",contexts:["selection"]},()=>{chrome.runtime.lastError})},r=()=>{chrome.contextMenus.removeAll()};chrome.runtime.onInstalled.addListener(()=>{chrome.storage.local.get(["enableContextMenu"],e=>{e.enableContextMenu!==!1&&n()})});chrome.contextMenus.onClicked.addListener((e,t)=>{if(e.menuItemId==="search-on-moctale"&&e.selectionText){const o=encodeURIComponent(e.selectionText.trim());chrome.tabs.create({url:`${c}${o}`})}});chrome.storage.onChanged.addListener((e,t)=>{t==="local"&&e.enableContextMenu&&(e.enableContextMenu.newValue?n():r())});
